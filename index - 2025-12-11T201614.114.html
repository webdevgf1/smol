<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory of Light</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0a0a0a;
            color: #fff;
            overflow: hidden;
            height: 100vh;
        }

        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            transition: opacity 1.5s ease;
        }

        #loading-screen.fade-out {
            opacity: 0;
            pointer-events: none;
        }

        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        #chat-container {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            z-index: 100;
            max-height: 60vh;
            display: flex;
            flex-direction: column;
        }

        #messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            max-height: calc(60vh - 80px);
        }

        .message {
            margin-bottom: 15px;
            padding: 12px 16px;
            border-radius: 12px;
            max-width: 80%;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            background: rgba(100, 100, 255, 0.2);
            margin-left: auto;
            border: 1px solid rgba(100, 100, 255, 0.3);
        }

        .message.assistant {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .message-label {
            font-size: 11px;
            opacity: 0.6;
            margin-bottom: 4px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        #input-container {
            padding: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            gap: 10px;
        }

        #message-input {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #fff;
            padding: 12px 16px;
            border-radius: 8px;
            font-size: 14px;
            outline: none;
            transition: all 0.3s ease;
        }

        #message-input:focus {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(100, 100, 255, 0.5);
        }

        button {
            background: rgba(100, 100, 255, 0.3);
            border: 1px solid rgba(100, 100, 255, 0.5);
            color: #fff;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        button:hover {
            background: rgba(100, 100, 255, 0.5);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        #nav-buttons {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 200;
        }

        #nav-buttons button {
            padding: 10px 20px;
            font-size: 12px;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            overflow-y: auto;
        }

        .modal.active {
            display: block;
        }

        .modal-content {
            max-width: 800px;
            margin: 50px auto;
            padding: 40px;
            background: rgba(20, 20, 20, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            position: relative;
        }

        .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: transparent;
            border: none;
            color: #fff;
            font-size: 24px;
            cursor: pointer;
            padding: 5px 10px;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        h2 {
            margin-bottom: 20px;
            font-size: 28px;
            color: rgba(100, 100, 255, 0.8);
        }

        .about-text {
            line-height: 1.8;
            opacity: 0.9;
            margin-bottom: 15px;
        }

        .archive-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .archive-item:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(100, 100, 255, 0.3);
        }

        .archive-date {
            font-size: 12px;
            opacity: 0.6;
            margin-bottom: 8px;
        }

        .archive-preview {
            font-size: 14px;
            opacity: 0.8;
        }

        .typing-indicator {
            display: none;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            max-width: 80px;
            margin-bottom: 15px;
        }

        .typing-indicator.active {
            display: block;
        }

        .typing-indicator span {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 50%;
            margin: 0 2px;
            animation: typing 1.4s infinite;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
                opacity: 0.6;
            }
            30% {
                transform: translateY(-10px);
                opacity: 1;
            }
        }

        .conversation-detail {
            margin-top: 20px;
        }

        .conversation-message {
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.03);
            border-left: 3px solid;
        }

        .conversation-message.user {
            border-left-color: rgba(100, 100, 255, 0.8);
        }

        .conversation-message.assistant {
            border-left-color: rgba(255, 100, 255, 0.8);
        }
    </style>
</head>
<body>
    <div id="loading-screen">
        <div style="text-align: center;">
            <div style="font-size: 24px; margin-bottom: 10px;">Loading...</div>
            <div style="font-size: 14px; opacity: 0.6;">A Memory Preserved</div>
        </div>
    </div>

    <div id="canvas-container"></div>

    <div id="nav-buttons">
        <button id="archives-btn">Archives</button>
        <button id="about-btn">About</button>
    </div>

    <div id="chat-container">
        <div id="messages">
            <div class="typing-indicator" id="typing-indicator">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        <div id="input-container">
            <input type="text" id="message-input" placeholder="Share your thoughts..." />
            <button id="send-btn">Send</button>
        </div>
    </div>

    <div id="archives-modal" class="modal">
        <div class="modal-content">
            <button class="close-btn">&times;</button>
            <h2>Archives</h2>
            <div id="archives-list"></div>
        </div>
    </div>

    <div id="about-modal" class="modal">
        <div class="modal-content">
            <button class="close-btn">&times;</button>
            <h2>About This Memorial</h2>
            <div class="about-text">
                <p style="margin-bottom: 20px;">
                    This is a living memorial, a preservation of a beautiful soul who touched the lives of everyone she knew.
                </p>
                <p style="margin-bottom: 20px;">
                    Using videos, pictures, diary entries, and countless memories, I've built an AI that embodies her knowledge, wisdom, and personality. This isn't just a chatbot—it's a way to keep her spirit alive, to preserve her legacy, and to ensure that her voice continues to bring comfort and guidance to those who knew and loved her.
                </p>
                <p style="margin-bottom: 20px;">
                    Every conversation here is a testament to her impact on this world. Her thoughts, her way of seeing things, her unique perspective—all carefully preserved through the memories we shared together.
                </p>
                <p style="margin-bottom: 20px;">
                    She was more than just words and memories. She was laughter, wisdom, compassion, and light. And though she's no longer with us in body, her essence lives on here, in every response, every interaction.
                </p>
                <p style="opacity: 0.7; font-style: italic;">
                    This memorial is built with love, powered by technology, and sustained by memory. May her legacy continue to inspire and comfort all who visit.
                </p>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>
    <script src="chat.js"></script>
</body>
</html>
